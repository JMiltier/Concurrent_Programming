# üîí C++ locking algorithms
Using two different sorting algorithms and two different paralellization strategies(fork/join and locks), this program sorts a (specified) *.txt*  file of unique integers and outputs the sorted list to a different (specified) *.txt* file. The input *.txt* file will be an unsorted data structure [Standard Template Library (STL) vector]. This is to emulate the performance of the UNIX `sort-n` command.

#### Locking Algorithms:
  1. **Test-and-set lock** -
  2. **Test-and-test-and-set lock** -
  3. **Ticket lock** -
  4. **MCS Lock** -
  5. **Sense-reversal barrier** -

#### üóúÔ∏è Added functionality:
  1. Fork/join parellelism - implementation of fork, join, and barriers
  2. Locks - synchronization mechanism for enforcing limits of resource access; also known as mutex (mutual exlcusion). Used in conjunction with multiple threading a process.

---
## üóÑÔ∏è Code Organization

### üìÅ Files
  1. `main.cpp` - primary C++ file for program execution
  2. `Makefile` - create executable objects
  3. `bucketsort.h` - header file for bucket sort using locks
  4. `counter.h` - header file for merge sort using fork/join
  5. `arg_parser.h` - error handling and parsing for program's input options
  6. `README.pdf` - write-up for project

### üíæ Additional files
  1. `randomNumberGen.cpp`- creates a text file with a specified number of random numbers from [ 1 - number size ]. Default number is 10,000 unless specified when ran (as second argument).
  2. `pthread_add.h` - threading if compiling on macOS (will still run as normal for linux systems)

### Compiling
  Note: If zipped, first unzip file before proceeding.
  1. From root directory, run `make` from the terminal. This will generate a program called *counter*
  2. Next, follow execution syntax below for parallel algoritm sorting.
  3. `Make clean` will remove all files generated by `make`.

## Execution
#### Program option/input parameters for `counter`
`counter [--name]`
  - `counter --name`: prints name to console.
**OR**
`counter [-t NUM THREADS] [-i=NUM_ITERATIONS] [--bar=<sense,pthread>] [--lock=<tas,ttas,ticket,mcs,pthread>] [-o out.txt]`
  1. `-t NUM_THREADS`: specify how many threads to use during execution (including master thread)
  2. `-i=NUM_ITERATIONS`:
  3. `--bar=<sense,pthread>`:
  4. `--lock=<tas,ttas,ticket,mcs,pthread>`:
  5. `-o out.txt`: sorted txt file of numebrs, in which the program outputs/writes to
  - **Additional outputs**: time of execution in nanoseconds

#### Program option/input parameters for `mysort`
  `mysort [--name]`
    - `counter --name`: prints name to console.
  **OR**
  `mysort [source.txt] [-o out.txt] [-t NUM THREADS] [--alg=<fj,bucket>] [--bar=<sense,pthread>] [--lock=<tas,ttas,ticket,mcs,pthread>]`
  1. `source.txt`
  2. `-o out.txt`
  3. `-t NUM_THREADS`: specify how many threads to use during execution (including master thread)
  4. `--alg=<fj,bucket>`:
  5. `--bar=<sense,pthread>`:
  6. `--lock=<tas,ttas,ticket,mcs,pthread>`:

#### üêú Surviving Bugs
  - Input/output files are loaded/saved as is. Does not check for txt file types.
  - Numbers within input txt file must be integers (not checked) for the program to work.
